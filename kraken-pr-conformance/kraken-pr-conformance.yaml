---
- job-template:
    name: '{name}-pr-conformance'
    description: 'Do not edit this job through the web! On a merged kraken PR, run all the jobs required to create a kraken cluster, run kubernetes conformance tests and then destroy it.'
    concurrent: false
    project-type: freestyle
    logrotate:
      numToKeep: 100
    properties:
      - github:
          url: https://github.com/Samsung-AG/kraken/
    scm:
      - git:
          url: https://github.com/Samsung-AG/kraken.git
          credentials-id: jenkins-ssh
          branches:
            - master
          browser: auto
          wipe-workspace: false
          skip-tag: true
    triggers:
      - github
    wrappers:
      - workspace-cleanup
    builders:
      - trigger-builds:
        - project: '{name}-k8s-conformance'
          svn-revision: true
          block: true
    publishers:
      - slack-publisher:
          slack_domain: '{slack_domain}'
          slack_api_token: '{slack_api_token}'
          ci_hostname: '{ci_hostname}'
          slack_room: '{slack_room}'

