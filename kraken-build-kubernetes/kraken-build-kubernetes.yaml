---
- job-template:
    name: '{name}-build-kubernetes'
    description: 'Do not edit this job through the web! Builds a kubernetes tests in a parameter-specified subfolder of {kubernetes_build_dir}'
    concurrent: true
    logrotate:
      numToKeep: 100
    parameters:
      - common-params
      - kubetestdir-params
    properties:
      - github:
          url: https://github.com/samsung-cnct/kraken/
    builders:
      - shell: |
          # build the tests
          target_dir="/var/lib/docker/gobuild/${{KUBE_TESTS_DIR}}"
          git clone -b "${{KUBE_TESTS_BRANCH}}" "${{KUBE_TESTS_REPO}}" "${{target_dir}}"
          cd "${{target_dir}}"
          KUBE_SKIP_CONFIRMATIONS=y build/run.sh hack/build-go.sh
