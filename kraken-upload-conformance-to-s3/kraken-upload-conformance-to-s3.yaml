---
- job-template:
  name: '{name}-upload-conformance-to-s3'
  project-type: freestyle
  parameters:
    - testing-params
    - string:
        name: KUBE_CONFORMANCE_DIR
    - string:
        name: KRAKEN_COMMIT
  properties:
    - build-discarder:
        days-to-keep: -1
        num-to-keep: 1
        artifact-days-to-keep: -1
        artifact-num-to-keep: -1
    - github:
        url: https://github.com/Samsung-AG/kraken/
    - slack:
        notify-start: true
        notify-success: true
        notify-aborted: true
        notify-failure: true
  scm:
    - git:
        url: ${{KRAKEN_REPO}}
        credentials-id: jenkins-github
        branches:
          - gh-pages
        browser: auto
  wrappers:
    - workspace-cleanup
    - mask-passwords
  builders:
    - shell: 
        !include-raw-escape: include-raw001-kraken-upload-conformance-to-s3.sh
  publishers:
    - slack:
        team-domain: '{slack_domain}'
        auth-token: '{slack_api_token}'
        room: '{slack_room}'
        build-server-url: 'https://{ci_hostname}'
