---
- job-template:
    name: '{name}-upload-to-s3'
    project-type: freestyle
    concurrent: true
    logrotate:
      numToKeep: 1
    parameters:
      - common-params
      - string:
          name: PROJECT_NAME
      - string:
          name: PROJECT_BUILD
      - string:
          name: PROJECT_ARTIFACT
      - string:
          name: TEST_KIND
    properties:
      - github:
          url: https://github.com/Samsung-AG/kraken/
    wrappers:
      - workspace-cleanup
      - mask-passwords
    builders:
      - copyartifact:
          project: ${{PROJECT_NAME}}
          which-build: specific-build
          build-number: ${{PROJECT_BUILD}}
          filter: ${{PROJECT_ARTIFACT}}
      - shell: 
          !include-raw-escape: include-raw001-kraken-upload-to-s3.sh
    publishers:
      - slack-publisher:
          slack_domain: '{slack_domain}'
          slack_api_token: '{slack_api_token}'
          ci_hostname: '{ci_hostname}'
          slack_room: '{slack_room}'
